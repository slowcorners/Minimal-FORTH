                                                              ORG     0x8000
                                                      
                                                      N0      EQU     0b00001111
                                                      N1      EQU     0b01010101
                                                      
8000 14 33 80                                         START:  JPA     MAIN
                                                      
8003 00                                               RegA:   DB      0
8004 00                                               RegB:   DB      0
8005 00                                               RegC:   DB      0
8006 00                                               RegD:   DB      0
8007 00                                               RegE:   DB      0
                                                      
                                                      ; ------------------------------
                                                      ;       XOR     RegE, RegD
                                                      
8008 0E 08                                            XOR:    LDI     8               ; Load bit counter
800A 16 05 80                                                 STA     RegC            ; :
800D 15 07 80                                         XOR10:  LDA     RegE            ; Get second operand
8010 05                                                       LSL                     ; Shift b7 into C
8011 16 07 80                                                 STA     RegE            ; Store shifted second operand
8014 15 06 80                                                 LDA     RegD            ; Load first operand
8017 3D 22 80                                                 BCS     XOR20           ; C is set, check 1b7 for zero
                                                              ; 2b7 is clear
801A 11 00                                                    CPI     0               ; Is first operand < 0, i.e. is b7 set?
801C 3F 28 80                                                 BMI     XOR90           ; 1b7 is set and 2b7 is clear, shift in C which is set
801F 14 27 80                                                 JPA     XOR80           ; 1b7 and 2b7 are both zero, clear C and shift in 
                                                              ; 2b7 is set, check 1b7 for zero
8022 11 00                                            XOR20:  CPI     0
8024 3E 28 80                                                 BPL     XOR90           ; If 1b7 is zero, shift in C which is set
8027 03                                               XOR80:  CLC                     ; 1b7 and 2b7 are equal, shift in a zero
8028 06                                               XOR90:  ROL                     ; Shift whatever is in C into result
8029 16 06 80                                                 STA     RegD            ; Store first operand/result
802C 27 05 80                                                 DEB     RegC            ; All bits done?
802F 3A 0D 80                                                 BNE     XOR10           ;   NO: Do one more
8032 39                                                       RTS                     ;   YES: All done
                                                      
                                                      MAIN:
8033 0E 0F                                                    LDI     N0
8035 16 06 80                                                 STA     RegD
8038 0E 55                                                    LDI     N1
803A 16 07 80                                                 STA     RegE
803D 38 08 80                                                 JPS     XOR
8040 15 06 80                                                 LDA     RegD
8043 16 03 80                                                 STA     RegA
8046 00                                               STOP:   NOP
8047 14 46 80                                                 JPA     STOP
